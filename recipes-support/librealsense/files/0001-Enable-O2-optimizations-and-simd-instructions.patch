From f67d8b6747ab46aa6466387c2f61ffa01e561ef4 Mon Sep 17 00:00:00 2001
From: Patroness Build <build@luci.com>
Date: Thu, 8 Aug 2019 22:01:31 +0000
Subject: [PATCH] Enable O2 optimizations and simd instructions

---
 CMake/unix_config.cmake | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/CMake/unix_config.cmake b/CMake/unix_config.cmake
index 676b3478..f495f5e1 100644
--- a/CMake/unix_config.cmake
+++ b/CMake/unix_config.cmake
@@ -9,8 +9,8 @@ macro(os_set_flags)
         set(CMAKE_C_FLAGS   "${CMAKE_C_FLAGS}   -mfpu=neon -mfloat-abi=hard -ftree-vectorize")
         set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mfpu=neon -mfloat-abi=hard -ftree-vectorize")
     elseif(${CMAKE_SYSTEM_PROCESSOR} MATCHES "aarch64")
-        set(CMAKE_C_FLAGS   "${CMAKE_C_FLAGS}   -mstrict-align -ftree-vectorize")
-        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mstrict-align -ftree-vectorize")
+        set(CMAKE_C_FLAGS   "${CMAKE_C_FLAGS}   -O2 -mstrict-align -ftree-vectorize -march=armv8-a+simd")
+        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -O2 -mstrict-align -ftree-vectorize -march=armv8-a+simd")
     else()
         set(CMAKE_C_FLAGS   "${CMAKE_C_FLAGS}   -mssse3")
         set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mssse3")
-- 
2.17.1

